---
import Hero from '@/components/common/hero/Hero.svelte';
import Layout from '@/layouts/Layout.astro';
import { getPageData } from '@/lib/helpers';
import type { AboutPageData } from '@/lib/types/aboutPage';
import Cta from '@/components/Cta.svelte';

const query = `*[_type == 'aboutPage'][0]{
    ...,
}`;

const data = await getPageData<AboutPageData>(query, {
  locale: 'en-SG',
  defaultLocale: 'en-SG',
});

const { page, site } = data;
const { sections, seo } = page;
---

<Layout seo={seo} site={site}>
  {
    sections.map((section) => {
      switch (section._type) {
        case 'common.hero':
          return <Hero client:load {...(section as CommonHeroData)} />;
        case 'common.cta':
          return <Cta client:visible {...(section as CTAData)} />;
        default:
          return null;
      }
    })
  }
</Layout>
