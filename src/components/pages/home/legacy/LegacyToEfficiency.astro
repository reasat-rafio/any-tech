---
import PortableText from '@/components/PortableText.astro';
import FlowDiagram from '@/components/pages/home/legacy/FlowDiagram.svelte';
import type { LegacyToEfficiencyData } from '@/lib/types/homePage';
import BusinessSolutionMobileLayout from './solution/BusinessSolutionMobileLayout.svelte';
import BusinessSolutionDesktopLayout from './solution/BusinessSolutionDesktopLayout.astro';
import H5 from '@/components/ui/H5.svelte';
import H2 from '@/components/ui/H2.svelte';
import Description from '@/components/ui/Description.svelte';

const { title, subtitle, flowDiagram, description, businessSolutions } =
  Astro.props as LegacyToEfficiencyData;
---

<section class="container">
  <div class="grid grid-cols-1 pb-[24px] lg:grid-cols-2 lg:gap-x-5 lg:pb-0">
    <article class="space-y-article">
      <H5>{title}</H5>
      <H2>{subtitle}</H2>
      <div class="lg:invisible lg:absolute lg:-top-[10000%] lg:-z-50">
        <FlowDiagram client:load {flowDiagram} />
      </div>
      <Description>
        <PortableText value={description} />
      </Description>
    </article>

    <section class="hidden lg:block">
      <FlowDiagram client:load {flowDiagram} />
    </section>
  </div>

  {
    !!businessSolutions?.length && (
      <>
        <BusinessSolutionMobileLayout client:load {businessSolutions} />
        <BusinessSolutionDesktopLayout {businessSolutions} />
      </>
    )
  }
</section>
