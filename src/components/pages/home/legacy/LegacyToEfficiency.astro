---
import PortableText from '@/components/PortableText.astro';
import FlowDiagram from '@/components/pages/home/legacy/FlowDiagram.svelte';
import type { LegacyToEfficiencyData } from '@/lib/types/homePage';
import BusinessSolutionMobileLayout from './solution/BusinessSolutionMobileLayout.svelte';
import BusinessSolutionDesktopLayout from './solution/BusinessSolutionDesktopLayout.astro';

const { title, subtitle, flowDiagram, description, businessSolutions } =
  Astro.props as LegacyToEfficiencyData;
---

<section class="container">
  <div class="grid grid-cols-12 pb-[24px] lg:gap-x-5 lg:pb-0">
    <section class="col-span-12 space-y-[16px] lg:col-span-6 lg:space-y-[26px]">
      <h5 class="text-res-head-5 uppercase text-blue-primary lg:text-head-5">
        {title}
      </h5>
      <!-- TODO Update the prettier config so it doesnt add any extra whitespace -->
      <!-- prettier-ignore -->
      <h2
        class="whitespace-pre-line font-Montserrat text-res-head-2 text-black lg:text-head-2">{subtitle}</h2>
      <div class="lg:invisible lg:absolute lg:-top-[10000%] lg:-z-50">
        <FlowDiagram {flowDiagram} />
      </div>
      <div class="text-res-body-p text-blue-secondary lg:text-body-p">
        <PortableText value={description} />
      </div>
    </section>

    <section class="hidden lg:col-span-6 lg:block">
      <FlowDiagram {flowDiagram} />
    </section>
  </div>

  {
    !!businessSolutions?.length && (
      <>
        <BusinessSolutionMobileLayout client:load {businessSolutions} />
        <BusinessSolutionDesktopLayout {businessSolutions} />
      </>
    )
  }
</section>
